<div id="reg-overlay" data-zephr-meterup>
    <div class="reg-navbar">
        <svg class="reg-close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17"><path d="M17 13.7c0 .4-.1.7-.4 1l-1.9 1.9c-.3.3-.6.4-1 .4s-.7-.1-1-.4l-4.2-4.2-4.2 4.2c-.3.3-.6.4-1 .4s-.7-.1-1-.4L.4 14.7c-.3-.3-.4-.6-.4-1s.1-.7.4-1l4.2-4.2L.4 4.3C.1 4 0 3.7 0 3.3s.1-.7.4-1L2.3.4c.3-.3.6-.4 1-.4s.7.1 1 .4l4.2 4.2L12.7.4c.3-.3.6-.4 1-.4s.7.1 1 .4l1.9 1.9c.3.3.4.6.4 1s-.1.7-.4 1l-4.2 4.2 4.2 4.2c.3.3.4.6.4 1z"></path></svg>
    </div>
    <div class="reg-content">
        <div class="reg-title"></div>
        <style>
        /* TEMPORARY - hide close button */
        .meter-modal .reg-close {
        display: none;
        }

        .meter-modal mark {
        background-color: {{highlight_bg_color}};
        text-decoration: line-through;
        color: {{highlight_color}};
        }

        .reg-cancel,
        .reg-dialog a {
        color: #fff;
        }

        .meter-modal {
        width: 718px;
        margin: 0 auto;
        box-shadow: 0 0 20px #666;
        font-family: 'Lato', Arial, Helvetica, sans-serif;
        }
        
        .meter-modal[data-variation="B"] .da-bubble-4 {
        display:none;  
        }

        .meter-modal h2,
        .meter-modal h3 {
        letter-spacing: normal;
        }

        .meter-modal .da-print {
        display: {{show_print}};
        }

        .meter-modal .reg-content {
        padding: 0 !important;
        }

        .meter-modal span {
        font-size: 12.5px;
        text-transform: uppercase;
        }

        .pull-left {
        float: left;
        }

        .pull-right {
        float: right;
        }

        .pw-row {
        display: block;
        padding: 10px 22px;
        margin: 0 auto;
        background-color: #307EA1;
        text-align: left;
        }

        .da-body {
        display: block;
        background-color: #fff;
        height: auto !important;
        background-position: center top;
        background-repeat: no-repeat;
        background-size: cover;
        text-align: center;
        color: #fff;
        padding: 15px 0px 0px;
        clear: both;

        }

        .da-offer {
        display: inline-block;
        width: 535px;
        text-align: center;
        margin: 40px auto 40px;
        }

        .da-image h3 {
        color: #666;
        font-size: 17px;
        font-weight: 900;
        margin: 8px 0 0;
        text-transform: unset;
        }

        .da-details h3 {  /* offer text */
        color: {{offer_color}};
        font-size: 20px;
        font-weight: 900;
        margin: 14px 0 10px;
        text-transform: uppercase;
        }

        .da-details h3 s {
        color: {{strikethrough_color}};
        }

        .fine-print {
        color: {{fine_print_color}};
        font-weight: 900;
        font-size: 12px;
        }

        .da-cta-div {
        margin: 0 0 8px;
        }

        .access-list {
        display: block;
        clear: both;
        }

        .access-list span { /* text above bubbles */
        color: {{bubble_header_color}};
        width: 100%;
        display: block;

        }

        .access-list>div {
        display: inline-block;
        margin: 20px 18px 24px;
        }

        .access-list>div:last-child {
        margin-left: 10px;
        }

        .access-list img {
        width: 65px;
        height: 65px;
        border: 0;
        }

        .access-list>div p, .access-list>div p span { /* bubble text */
        font-size: 11px;
        line-height: 13px;
        text-transform: uppercase;
        margin: 2px 0 0;
        color: {{bubble_text_color}};
        }


        .da-digital-button {
        color: {{cta_text_color}};
        background-color: {{cta_bg_color}};
        }

        .da-head {
        background-color: {{header_bg_color}};
        }

        .pw-btn {
        padding: 15px 0;
        display: inline-block;
        font-weight: 700;
        font-size: 14px;
        color: #ffffff;
        text-align: center;
        text-decoration: none;
        text-transform: uppercase;
        border-radius: 100px;
        }

        .pw-btn.lrg {
        min-width: 255px;
        }

        .pw-btn.small {
        font-size: 12.5px;
        padding: 10px 0;
        color: {{button_text_color}};
        background-color: {{button_bg_color}};
        min-width: 168px;
        }

        .pw-btn.small.print-link {
        color:{{print_button_text_color}};
        }

        .pw-row>div {
        display: inline-block
        }

        .pw-row span {
        line-height:35px;
        color: {{header_text_color}};
        font-weight: bold;
        }

        .da-progress {
        line-height: {{progress_desktop_line_height}} !important;
        }

        .pw-text.bottom span { /* print text */
        color: {{print_text_color}};
        }

        .pw-row.da-footer { /* print footer */
        background-color: {{print_bg_color}};
        }

        .da-login-link, .da-logout-link, .da-print-link {
        float: right;
        }

        .da-body h2 { /* tagline */
        font-size: 26px;
        letter-spacing:-0.5px;
        font-weight: bold;
        color: {{tagline_color}};
        margin: 14px 0px 10px 0px;
        }

        .da-urgency { /* urgency */
        color: {{urgency_color}};
        font-size: 12px;
        font-weight: 900;
        margin:0;
        text-align:center;
        text-transform: uppercase;
        letter-spacing: normal;
        }

        .da-legal {
        background-color: {{footer_bg_color}};
        text-align: center;
        color: {{footer_text_color}};
        font-size: 11px;
        padding: 18px 0;
        }

        .da-legal a {
        display: inline-block;
        color: {{footer_text_color}};
        text-decoration: none;
        margin: 0 3px;
        }

        [data-reg-loggedin] .da-login-link {
        visibility: hidden;
        }
        
        .da-logout-link {
        visibility: hidden;
        }

        [data-reg-loggedin] .da-logout-link {
        visibility: visible;
        }

        @media screen and (max-width: 980px) {}

        @media screen and (max-width: 767px) {}

        @media only screen and (max-device-width:480px),
        screen and (max-width: 480px) {

        .meter-modal {
            width: 100%;
            box-shadow: none;
        }

        .pw-btn.small {
            padding: 8px 0;
            min-width: 148px;
            font-size: 12px;
        }

        .pw-row {
            padding: 12px 18px 13px 18px;
        }

        .pw-row span {
            line-height:16px;
            display: block;
            font-size: 12px;
        }

        .da-progress {
            line-height: {{progress_mobile_line_height}} !important;
        }

        .da-body h2 {
            font-size: 24px;
            margin-top:0px;
        }

        .da-offer {
            width: auto;
        }

        .da-image,
        .da-details {
            float: none;
        }

        .access-list {
            max-width: 280px;
            margin: 50px auto;
        }

        .meter-modal .access-list>div {
            /*  break the bubbles into two lines */
            width:37%;
        }

        .access-list>div:last-child {
            margin-left: 0;
        }

        .toggle p {
            color: #666;
            font-style: italic;
            font-size: 14px;
            margin: 0 0 6px;
        }

        .toggle img {
            width: 24px;
            height: 24px;
        }

        .pw-btn.lrg {
            min-width: 250px;
        }

        .da-details h3,
        .da-details span {
            letter-spacing: .5px;
        }

        .m_show,
        .toggle {
            display: block !important;
        }

        }

        @media only screen and (max-device-width:360px),
        screen and (max-width: 360px) {
        .pw-row {}

        .pw-row span {
            line-height:12px;
            font-size: 10px;
        }

        .da-progress {
            line-height: {{progress_tiny_line_height}} !important;
        }

        .pw-btn.small {
            padding: 6px 0;
            font-size: 10px;
            min-width: 120px;
        }

        .da-body h2 {
            font-size: 20px;
        }
        }
        </style>
        <div class="meter-modal" data-variation="{{variation}}" data-market="{{domain}}">
        <div class="pw-row da-head">
            <div class="pw-text">
            <span class="da-progress" data-break="{{progress_break}}">{{progress}}</span>
            </div>
            <div class="da-login-link">
            <a class="pw-btn small" data-reg-handler="signInHandler" href="#">Subscriber Login</a>
            </div>
            <div class="da-logout-link">
            <a class="pw-btn small" data-reg-handler="logoutin" href="#">Log Out</a>
            </div>
        </div>
        <div class="da-body">
            <h2 data-break="{{tagline_break}">{{tagline}}</h2>
            <p class="da-urgency">{{urgency}}</p>
            <div class="da-offer">
            <div class="da-image pull-left">
                <img class="da-device-image" src="//www.{{domain}}.com/subscriptions/modal-{{campaign}}/img/device-uda.{{image_ext}}" alt="{{uda_caption}} " style="width: 163px;">
                <h3>{{uda_caption}}</h3>
            </div>
            <div class="da-details pull-right">
                <h3>{{offer}}</h3>
                <div class="da-cta-div ">
                <a class="da-digital-button pw-btn lrg" href="{{subscribeUrl}}" data-met-return="">{{cta}}</a>
                </div>
                <span class="fine-print">{{fine_print}}</span>
            </div>
            </div>
            <div class="toggle" style="display:none;">
            <p>See what's included</p>
            <img src="//www.{{domain}}.com/subscriptions/modal-{{campaign}}/img/arrow.svg" alt="arrow">
            </div>
            <div class="access-list">
            <span>{{bubble_header}}</span>
            <div class="da-bubble-1">
                <img class="da-device-image" src="//www.{{domain}}.com/subscriptions/modal-{{campaign}}/img/icon-{{bubble_one_image}}.{{bubble_image_ext}}" alt="{{bubble_one_image}}">
                <p>{{bubble_one}}</p>
            </div>
            <div class="da-bubble-2">
                <img class="da-device-image" src="//www.{{domain}}.com/subscriptions/modal-{{campaign}}/img/icon-{{bubble_two_image}}.{{bubble_image_ext}}" alt="{{bubble_two_image}}">
                <p>{{bubble_two}}</p>
            </div>
            <div class="da-bubble-3">
                <img class="da-device-image" src="//www.{{domain}}.com/subscriptions/modal-{{campaign}}/img/icon-{{bubble_three_image}}.{{bubble_image_ext}}" alt="{{bubble_three_image}}">
                <p>{{bubble_three}}</p>
            </div>
            <div class="da-bubble-4">
                <img class="da-device-image" src="//www.{{domain}}.com/subscriptions/modal-{{campaign}}/img/icon-{{bubble_four_image}}.{{bubble_image_ext}}" alt="{{bubble_four_image}}">
                <p>{{bubble_four}}</p>
            </div>
            </div>
        </div>
        <div class="pw-row da-footer da-print">
            <div class="pw-text bottom">
            <span data-break="{{print_delivery_break}}">{{print_delivery_text}}</span>
            </div>
            <div class="da-print-link">
            <a href="{{print_delivery_url}}" target="_blank" class="pw-btn small print-link">{{print_delivery_cta}}</a>
            </div>
        </div>
        <div class="da-legal"> <!-- space needed to retain quotes so open-tag doesn't become self-closing with trailing slash -->
            <a class="reg-cancel abandon" href="{{abandonUrl}}{{_ }}">{{abandon}</a> <span aria-hidden="true">|</span> <a href="https://www.tribpub.com/central-terms-of-service/" target="_blank">Terms of Service</a> <span aria-hidden="true">|</span> <a href="https://www.tribpub.com/privacy-policy/" target="_blank">Privacy Policy</a>
        </div>
        </div>
        <script>
        ((window.trb || (trb = {})).metering || (trb.metering = {})).push(function(reg) {
        var break_code = '<br class="m_show" style="display:none;">';
        document.querySelectorAll('.meter-modal [data-break]').forEach(function(elem) {
            //  insert `break_code` after `data-break`
            var b = elem.getAttribute('data-break');
            if(b != '')
            elem.innerHTML = elem.innerHTML.replace(new RegExp(b, 'ig'), b + break_code);
        });
        });
        </script>
    </div>
